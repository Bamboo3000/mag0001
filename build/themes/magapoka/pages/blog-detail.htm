description = "Blog detail page"
layout = "blog-detail"
url = "/blog/post/:slug"

[blogPost]
slug = "{{ :slug }}"
categoryPage = "blog/category"

[blogCategories]
slug = "{{ :slug }}"
displayEmpty = 0
categoryPage = "blog/category"
==
{% set post = blogPost.post %}

<div class="container">

    {% if post.featured_images.count %}
        <picture class="bg-cover">
            <source media="(min-width: 768px)" srcset="{{ post.featured_images[0].path|resize(1200) }}">
            <img class="bg-cover" src="{{ post.featured_images[0].path|resize(1200) }}" alt="{{ post.featured_images[0].description }}">
        </picture>
    {% endif %}

    <section class="blog__post">

        <main>
            <article>
            
                <h1>
                    {{ post.title }}
                </h1>
                
                <p class="info">
                    Posted
                    {% if post.categories.count %} in
                        {% for category in post.categories %}
                            <a href="{{ category.url }}">{{ category.name }}</a>{% if not loop.last %}, {% endif %}
                        {% endfor %}
                    {% endif %}
                    on {{ post.published_at|date('M d, Y') }}
                </p>
                
                <div class="content">
                    {{ post.content_html|raw }}
                </div>

            </article>
        </main>

        <aside>
            <div class="searchbox">
                <i class="material-icons search-btn" aria-hidden="true" onclick="openSearch(this)">search</i>
                <form 
                    class="search-field" 
                    id="search-field-general"
                    data-request="onSearchRedirect"
                >
                    <input type="search" name="search-input" id="search-field-general-input" placeholder="{{ 'Job search'|_ }}" onblur="hideSearch()" tabindex="-1">
                    <input type="submit" style="display:none;">
                </form>
            </div>
            <div class="categories">
                {% if blogCategories.categories %}
                    <ul class="category-list">
                        {% partial blogCategories ~ "::items"
                            categories = blogCategories.categories
                            currentCategorySlug = blogCategories.currentCategorySlug
                        %}
                    </ul>
                {% endif %}
            </div>
        </aside>

    </section>

</div>